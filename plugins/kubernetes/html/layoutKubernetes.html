<script type="text/ng-template" id="breadcrumbsTemplate.html">
  <div ng-show="breadcrumbConfig" ng-init="breadcrumbConfig = $parent.breadcrumbConfig">
    <ol class="breadcrumb">
      <li ng-repeat="breadcrumb in breadcrumbConfig" class="{{breadcrumb.active ? 'active' : ''}}"
          title="{{breadcrumb.title}}">
        <a ng-show="breadcrumb.href && !breadcrumb.active" href="{{breadcrumb.href}}">{{breadcrumb.label}}</a>
        <span ng-hide="breadcrumb.href && !breadcrumb.active">{{breadcrumb.label}}</span>
    </ol>
  </div>
</script>
<script type="text/ng-template" id="subTabsTemplate.html">
  <div ng-show="subTabConfig" ng-init="subTabConfig = $parent.subTabConfig" class="breadcrumb-tabs">
    <ul class="nav navbar-nav nav-tabs">
      <li ng-repeat="breadcrumb in subTabConfig" class="{{breadcrumb.active ? 'active' : ''}}"
          title="{{breadcrumb.title}}">
        <a href="{{breadcrumb.href}}">{{breadcrumb.label}}</a>
    </ul>
  </div>
</script>
<script type="text/ng-template" id="runButton.html">
  <button ng-show="model.showRunButton"
          class="btn btn-success pull-right"
          ng-click="viewTemplates()"
          title="Run an application from a template">
    <i class="fa fa-play-circle"></i> Run ...
  </button>
</script>
<script type="text/ng-template" id="idTemplate.html">
  <div class="ngCellText">
    <a href=""
       title="View details for {{row.entity.metadata.name || row.entity.name}}"
       ng-href="{{row.entity | kubernetesPageLink}}">
      <img class="app-icon-small" ng-src="{{row.entity.$iconUrl}}" ng-show="row.entity.$iconUrl">
      {{row.entity.metadata.name || row.entity.name}}</a>
  </div>
</script>
<script type="text/ng-template" id="selectorTemplate.html">
  <div class="ngCellText">
    <span ng-repeat="(name, value) in row.entity.spec.selector track by $index">
      <strong>{{name}}</strong>: {{value}}
    </span>
  </div>
</script>
<script type="text/ng-template" id="podCountsAndLinkTemplate.html">
  <div class="ngCellText" title="Number of running pods for this controller">
    <a ng-show="row.entity.$podCounters.podsLink" href="{{row.entity.$podCounters.podsLink}}" title="View pods">
      <span ng-show="row.entity.$podCounters.valid" class="badge badge-success">{{row.entity.$podCounters.valid}}</span>
      <span ng-show="row.entity.$podCounters.waiting" class="badge">{{row.entity.$podCounters.waiting}}</span>
      <span ng-show="row.entity.$podCounters.error" class="badge badge-warning">{{row.entity.$podCounters.error}}</span>
    </a>
  </div>
</script>
<script type="text/ng-template" id="labelTemplate.html">
  <div class="ngCellText" ng-init="entity=row.entity" ng-controller="Kubernetes.Labels">
    <p ng-show="data"><strong>Labels</strong></p>
    <span ng-repeat="label in labels track by $index"
          class="pod-label badge"
          ng-class="labelClass(label.key)"
          ng-click="handleClick(entity, label.key, label)"
          title="{{label.key}}">{{label.title}}</span>
  </div>
</script>
<script type="text/ng-template" id="eventSourceTemplate.html">
  <div class="ngCellText" ng-init="labels=row.entity.source">
    <p ng-show="data"><strong>Labels</strong></p>
    <span ng-repeat="(key, value) in labels track by $index"
          class="pod-label badge"
          class="background-light-grey mouse-pointer"
          title="{{key}}"
          ng-click="$emit('labelFilterUpdate', key + '=' + value)">{{value}}</span>
  </div>
</script>
<script type="text/ng-template" id="hostTemplate.html">
  <div class="ngCellText" ng-init="host=row.entity.$host">
    <span class="pod-label badge"
          class="background-light-grey mouse-pointer"
          ng-click="$emit('labelFilterUpdate', 'host=' + host)">{{host}}</span>
  </div>
</script>
<script type="text/ng-template" id="portalAddress.html">
  <div class="ngCellText">
    <div ng-repeat="port in row.entity.$ports">
      <a target="_blank" href="{{row.entity.$connectUrl}}"
         ng-show="row.entity.$connectUrl && row.entity.$podCounters.valid"
         title="Protocol {{row.entity.spec.protocol}}">
        {{row.entity.$host}}
      </a>
      <span ng-hide="row.entity.$connectUrl && row.entity.$podCounters.valid">{{row.entity.spec.portalIP || row.entity.spec.clusterIP}}:{{port}}</span>
    </div>
  </div>
</script>
<script type="text/ng-template" id="iconCellTemplate.html">
  <div class="ngCellText">
    <img class="app-icon-small" ng-src="{{row.entity.$iconUrl}}">
  </div>
</script>
<script type="text/ng-template" id="ageTemplate.html">
  <div class="ngCellText">
    {{row.entity.$age}}
  </div>
</script>
<script type="text/ng-template" id="firstTimestampTemplate.html">
  <div class="ngCellText" title="{{row.entity.$firstTimestamp}}">
    {{row.entity.$firstTimestamp.relative()}}
  </div>
</script>
<script type="text/ng-template" id="lastTimestampTemplate.html">
  <div class="ngCellText" title="{{row.entity.$lastTimestamp}}">
    {{row.entity.$lastTimestamp.relative()}}
  </div>
</script>
<script type="text/ng-template" id="eventKindTemplate.html">
  <div class="ngCellText" ng-init="kind=row.entity.involvedObject.kind">
    <span class="pod-label badge"
          class="background-light-grey mouse-pointer"
          ng-click="$emit('labelFilterUpdate', 'kind=' + kind)">{{kind}}</span>
  </div>
</script>
<script type="text/ng-template" id="eventNameTemplate.html">
  <div class="ngCellText" ng-init="name=row.entity.involvedObject.name">
    <span class="pod-label badge"
          class="background-light-grey mouse-pointer"
          ng-click="$emit('labelFilterUpdate', 'name=' + name)">{{name}}</span>
  </div>
</script>
<script type="text/ng-template" id="eventSummaryTemplate.html">
  <div class="ngCellText" title="Number of events on this resource">
    <a ng-show="row.entity.$eventsLink" href="{{row.entity.$eventsLink}}">
      <span class="badge">{{row.entity.$events.length}}</span>
    </a>
  </div>
</script>
<script type="text/ng-template" id="statusTemplate.html">
  <div class="ngCellText" ng-init="entity=row.entity" ng-controller="Kubernetes.PodStatus"
       title="Pod {{entity.metadata.name}} is {{entity.status.phase}}">
    <!-- in detail view -->
    <p ng-show="data"><strong>Status: </strong></p>
    <i class="fa {{entity.$statusCss}}"></i>
    <span ng-show="data">{{data}}</span>
    <!-- in table -->
    <span ng-show="entity.$jolokiaUrl" ng-controller="Kubernetes.ConnectController">
      <a class="clickable"
         ng-click="doConnect(row.entity)"
         title="Open a new window and connect to this container">
        <i class="fa fa-sign-in"></i>
      </a>
    </span>
  </div>
</script>
<script type="text/ng-template" id="resizeDialog.html">
  <div modal="resizeDialog.dialog.show">
    <form class="form-horizontal" ng-submit="resizeDialog.onOk()">
      <div class="modal-header"><h4>Scale {{resizeDialog.controller.metadata.name}}</h4></div>
      <div class="modal-body">
        <div class="control-group">
          <label class="control-label" for="replicas">Number of pods you would like to scale to?</label>

          <div class="controls">
            <input type="number" min="0" id="replicas" ng-model="resizeDialog.newReplicas">
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <input class="btn btn-primary" type="submit"
               ng-disabled="resizeDialog.newReplicas === resizeDialog.controller.status.replicas"
               value="Resize">
        <button class="btn btn-warning cancel" type="button" ng-click="resizeDialog.close()">Cancel</button>
      </div>
    </form>
  </div>
</script>
<script type="text/ng-template" id="namespaceSelector.html">
  <span ng-controller="Kubernetes.NamespaceController">
    namespace:
    <select ng-model="namespace" ng-options="namespace for namespace in namespaces"
            title="choose the namespace - which is a selection of resources in kubernetes">
    </select>
  </span>
</script>
<script type="text/ng-template" id="pipelineTemplate.html">
  <div class="pipeline-block">
    <div class="pipeline-build inline-block" title="{{build.description || 'Pipeline build number ' + build.displayName}}">
      <div class="buildName">
        <a href="{{build.$viewLink}}" ng-show="build.$viewLink" target="build" title="View the build details inside Jenkins">
          {{build.displayName}}
        </a>
        <span ng-hide="build.$viewLink">
          {{build.displayName}}
        </span>
      </div>
      <div class="buildParameters" title="{{build.$parameterText}}">
        <ng-pluralize count="build.$parameterCount"
                         when="{'0': 'No parameters',
                             'one': '1 parameter',
                             'other': '{} parameters'}">
        </ng-pluralize>
      </div>
    </div>

    <div ng-repeat="stage in build.stages | filter:model.filterText track by $index" class="inline-block">
      <div class="pipeline-arrow inline-block" ng-show="$index">
        <i class="fa fa-long-arrow-right"></i>
      </div>
      <div class="pipeline-deploy {{stage.$backgroundClass}} inline-block">
        <div class="stageName" title="{{stage.status}}"><i class="{{stage.$iconClass}}"></i> {{stage.stageName}}
        </div>
        <div class="stageStartTime" title="Stage started at {{stage.$startTime}}">
          <a href="{{stage.$viewLink}}" title="This stage started at {{stage.$startTime}}" target="logs">
            {{stage.$startTime.relative()}}
          </a>
          &nbsp;
          &nbsp;
          &nbsp;
          <a href="{{stage.$logLink}}" title="View the logs of this stage" target="logs">
            {{stage.duration.duration()}}
          </a>
        </div>
      </div>
    </div>
  </div>
</script>
<script type="text/ng-template" id="pendingPipelines.html">
  <div class="row" ng-controller="Developer.PipelinesController">
    <div class="row">
      <div class="col-md-12">
        <div ng-hide="model.fetched">
          <div class="align-center">
            <i class="fa fa-spinner fa-spin"></i>
          </div>
        </div>
        <div ng-show="model.fetched">
          <div ng-hide="model.job.builds.length" class="align-center">
            <p class="alert alert-info">There are no pipelines for this job.</p>
          </div>
          <div ng-show="model.job.builds.length">
            <div class="pipeline-build-block" ng-repeat="build in model.job.builds | filter:model.filterText track by $index">
              <ng-include src="'pipelineTemplate.html'"/>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</script>
<script type="text/ng-template" id="creationTimeTemplate.html">
  <div class="ngCellText" title="created at: {{row.entity.$creationDate | date : 'h:mm:ss a, EEE MMM yyyy'}}">
    {{row.entity.$creationDate.relative()}}
  </div>
</script>

<div ng-controller="Kubernetes.TopLevel">
  <div class="wiki-icon-view" ng-controller="Kubernetes.FileDropController" nv-file-drop nv-file-over
       uploader="uploader" over-class="ready-drop">
    <div class="row kubernetes-view" ng-view></div>
  </div>
</div>
